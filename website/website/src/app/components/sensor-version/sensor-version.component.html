<div class="container-fluid ">
  <div class="header-body">
    <!-- Card stats -->
    <div class="row">
      <div class="col-xl-9 col-lg-9">
        <div class="card card-stats mb-4 mb-xl-0 bg-gradient-default">
          <div class="card-body">
            <div class="row">
              <div class="col">
                <button class="btn btn-white mb-1"
                  mat-button
                  type="button"
                  data-toggle="modal"
                  data-target="#modal-form-sensor">
                  New Sensor
                </button>
                <div class="modal fade"
                  id="modal-form-sensor"
                  tabindex="-1"
                  role="dialog"
                  aria-labelledby="modal-form1"
                  aria-hidden="false">
                  <div class="modal-dialog modal- modal-dialog-centered modal-sm"
                    role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button class="close"
                          type="button"
                          data-dismiss="modal"
                          aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <h3 class="modal-title text-center">
                          Add a New Sensor
                        </h3>
                        <!-- <div class="card bg-secondary shadow border-0"> -->
                        <!--Add Sensor Header-->
                        <!-- <div class="card-body"> -->
                        <!-- <div class="text-center mb-3"> -->
                        <!-- <h3>Add a New Sensor</h3> -->
                        <!-- </div> -->
                        <form class="was-validated"
                          role="form"
                          [formGroup]="newSensor">
                          <mat-form-field class="form-max-lg">
                            <input matInput
                              type="text"
                              #inputName
                              placeholder="Name"
                              formControlName="name"
                              required>
                            <mat-hint>
                              <div *ngIf="!inputName.value?.length">
                                This field must be filled.
                              </div>
                            </mat-hint>
                          </mat-form-field>
                          <mat-form-field class="form-max-lg">
                            <input matInput
                              type="text"
                              #inputDisplayName
                              placeholder="Display Name"
                              formControlName="displayName"
                              required>
                            <mat-hint>
                              <div *ngIf="!inputDisplayName.value?.length">
                                This field must be filled.
                              </div>
                            </mat-hint>
                          </mat-form-field>
                          <mat-form-field class="form-max-lg">
                            <input matInput
                              type="text"
                              #inputPlace
                              placeholder="Display Name Subtitle (place)"
                              formControlName="subDisplayName"
                              required>
                            <mat-hint>
                              <div *ngIf="!inputPlace.value?.length">
                                This field must be filled.
                              </div>
                            </mat-hint>
                          </mat-form-field>

                          <mat-form-field class="form-max-lg">
                            <input matInput
                              type="text"
                              #inputType
                              list="type"
                              placeholder="Type of Sensor"
                              formControlName="type"
                              required>
                            <mat-hint>
                              <div *ngIf="!inputType.value?.length">
                                This field must be filled.
                              </div>
                            </mat-hint>
                            <datalist
                              id="type">
                              <option *ngFor="let sensor of typeList;"
                                value="{{sensor.idType}}">
                                ({{sensor.idType}}) {{sensor.name}} --
                                 {{sensor.version}}
                              </option>
                            </datalist>
                          </mat-form-field>
                          <label class="mt-3 color-gray">
                            Localisation
                          </label>
                          <div>
                            <mat-accordion>
                              <mat-expansion-panel>
                                <mat-expansion-panel-header>
                                  <mat-panel-title class="color-gray">
                                    Use GPS Coordinates
                                  </mat-panel-title>
                                  <mat-panel-description>
                                    <mat-icon class="icon-gps">
                                      gps_fixed
                                    </mat-icon>
                                  </mat-panel-description>
                                </mat-expansion-panel-header>
                                <mat-form-field class="form-max-lg">
                                  <input matInput
                                    type="number"
                                    placeholder="Latitude"
                                    formControlName="latitude">
                                </mat-form-field>
                                <mat-form-field class="form-max-lg">
                                  <input matInput
                                    type="number"
                                    placeholder="Longitude"
                                    formControlName="longitude">
                                </mat-form-field>
                              </mat-expansion-panel>
                              <mat-expansion-panel
                                (opened)="panelOpenState = true"
                                (closed)="panelOpenState = false">
                                <mat-expansion-panel-header>
                                  <mat-panel-title class="color-gray">
                                    Use address
                                  </mat-panel-title>
                                  <mat-panel-description>
                                    <i class="fas fa-lg fa-map-signs icon-sign"></i>
                                  </mat-panel-description>
                                </mat-expansion-panel-header>
                                Input address
                              </mat-expansion-panel>
                              <mat-expansion-panel
                                (opened)="panelOpenState = true"
                                (closed)="panelOpenState = false">
                                <mat-expansion-panel-header>
                                  <mat-panel-title class="color-gray">
                                    Use Map
                                  </mat-panel-title>
                                  <mat-panel-description>
                                    <i class="fas fa-lg fa-map-marked-alt icon-map"></i>
                                  </mat-panel-description>
                                </mat-expansion-panel-header>
                                <div id="mapid"></div>
                              </mat-expansion-panel>
                            </mat-accordion>
                          </div>
                        </form>
                        <!-- </div> -->
                        <!-- </div> -->
                      </div>
                      <div class="modal-footer">
                        <div class="col text-center">
                          <button class="btn btn-warning text-white"
                            mat-button
                            type="button"
                            (click)="resetSensorForm()">
                            Reset
                          </button>
                          <button class="btn btn-primary text-white"
                            mat-button
                            type="button"
                            (click)="onAddNewSensor()">
                            Add
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <button class="btn btn-white"
                 mat-button
                 type="button"
                 data-toggle="modal"
                 data-target="#modal-form-sensor-type">
                 New Type of Sensor
                </button>
                <div class="modal fade"
                  id="modal-form-sensor-type"
                  tabindex="-1"
                  role="dialog"
                  aria-hidden="false">
                  <div class="modal-dialog modal- modal-dialog-centered modal-sm"
                    role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button class="close"
                          type="button"
                          data-dismiss="modal"
                          aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <!-- <div class="card bg-secondary shadow border-0">
                        <div class="card-body"> -->
                        <div class="text-center text-muted mb-3">
                          <h3>Add a New Type of Sensor</h3>
                        </div>
                        <form class="was-validated"
                          role="form"
                          [formGroup]="newSensorMetaData">
                          <mat-form-field class="form-max-lg">
                            <input matInput
                              type="text"
                              placeholder="Name"
                              #inputTypeName
                              formControlName="name"
                              required>
                            <mat-hint>
                              <div *ngIf="!inputTypeName.value?.length">
                                This field must be filled.
                              </div>
                            </mat-hint>
                          </mat-form-field>
                          <mat-form-field class="form-max-lg">
                            <input matInput
                              type="text"
                              placeholder="Version"
                              #inputVersion
                              formControlName="version"
                              required>
                            <mat-hint>
                              <div *ngIf="!inputVersion.value?.length">
                                This field must be filled.
                              </div>
                            </mat-hint>
                          </mat-form-field>
                          <mat-form-field class="form-separator">
                            <input matInput
                              type="text"
                              placeholder="Separator"
                              #inputSelector
                              formControlName="separator"
                              required>
                            <mat-hint>
                              <div *ngIf="!inputSelector.value?.length">
                                This field must be filled.
                              </div>
                            </mat-hint>
                          </mat-form-field>
                          <button class="text-primary"
                            mat-icon-button
                            type="button"
                            (click)="refreshMetaDataOrder()">
                            <i class="fas fa-check"></i>
                          </button>
                          <label class="color-gray mt-3">
                            Measured Parameters
                          </label>
                          <div class="row">
                            <div *ngFor="let parameter of metaData;">
                              <div class="col-auto">
                                <div class="icon-metadata">
                                  <button class="{{changeIcon(parameter.id)}}"
                                    type="button"
                                    placement="bottom"
                                    ngbTooltip="{{parameter.parameter}}
                                    ({{parameter.unit}})"
                                    (click)="onMetaData(parameter.id)">
                                    <i class="{{parameter.icon}}"></i>
                                  </button>
                                  <div *ngIf="idList.includes(parameter.id)">
                                    <div *ngIf="idIndex(parameter.id) !== 0">
                                      <button class="hover-left"
                                        type="button"
                                        (click)="onMoveLeft(parameter.id)">
                                        <span placement="bottom"
                                          ngbTooltip="Move to the left">
                                          <i class="fas fa-chevron-left"></i>
                                        </span>
                                      </button>
                                    </div>
                                    <div class="badge rounded badge-index"
                                      placement="bottom"
                                      ngbTooltip="Index of the parameter">
                                      {{idIndex(parameter.id)}}
                                    </div>
                                    <div *ngIf="idIndex(parameter.id) + 1 !== idList.length">
                                      <button class="hover-right"
                                        type="button"
                                        (click)="onMoveRight(parameter.id)">
                                        <span placement="bottom"
                                          ngbTooltip="Move to the right">
                                          <i class="fas fa-chevron-right"></i>
                                        </span>
                                      </button>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <mat-form-field class="form-max-lg">
                            <input matInput
                              type="text"
                              #inputDescription
                              placeholder="Description"
                              formControlName="description"
                              required>
                            <mat-hint>
                              <div *ngIf="!inputDescription.value?.length">
                                This field must be filled.
                              </div>
                            </mat-hint>
                          </mat-form-field>
                        </form>
                        <!-- <div>
                      		<form method="POST" enctype="multipart/form-data" action="/">
                      			<table>
                      				<tr><td>File to upload:</td><td><input type="file" name="file" /></td></tr>
                      				<tr><td></td><td><input type="submit" value="Upload" /></td></tr>
                      			</table>
                      		</form>
                      	</div> -->

                        <!-- </div>
                        </div> -->
                      </div>
                      <div class="modal-footer">
                        <div class="col" align="center">
                          <button class="btn btn-warning text-white"
                            mat-button
                            type="button"
                            (click)="resetSensorMetaDataForm()">
                            Reset
                          </button>
                          <button class="btn btn-primary text-white"
                            mat-button
                            type="button"
                            (click)="onAddNewSensorMetaData()">
                            Add
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-auto">
                <div class="icon icon-shape bg-warning text-white">
                  <i class="fa fa-pencil-alt"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
